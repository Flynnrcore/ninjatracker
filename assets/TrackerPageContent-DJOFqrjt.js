import{c as $,u as C,r as n,A as L,j as e,a as V,L as j,I as h,E as g,b as d,w as _,t as b}from"./index-8jR17jte.js";import{S as w,a as N,b as v,c as k,d as p,f as S}from"./format-Dn8KZN0Q.js";import{g as T}from"./TimeFn-C06SccJk.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],E=$("star",A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],M=$("trash-2",D),B=()=>{const{token:i}=C(),[u,c]=n.useState([]),[f,l]=n.useState(!0);return n.useEffect(()=>{if(!i){c([]),l(!1);return}l(!0),fetch(L.trainings,{headers:{Authorization:`Bearer ${i}`}}).then(r=>r.json()).then(r=>{c(r),l(!1)}).catch(()=>{c([]),l(!1)})},[i]),{trainings:u,loading:f,setTrainings:c}},O=()=>{const{token:i}=C(),{trainings:u,loading:c,setTrainings:f}=B(),[l,r]=n.useState(()=>window.innerWidth>=1024?"table":"cards"),[x,I]=n.useState("all"),[m,z]=n.useState("all"),y=async s=>{if((await fetch(`${L.trainings}/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok)f(a=>a.filter(R=>R.id!==s)),b.success("Тренировка удалена");else{b.error("Ошибка при удалении тренировки");return}};n.useEffect(()=>{window.innerWidth>=1024?r("table"):r("cards")},[]);const o=u.filter(s=>{const t=x==="all"||!x||s.instrument===x,a=m==="all"||!m||s.type.includes(m);return t&&a});return c?e.jsx(V,{}):e.jsx("div",{className:"mt-15 min-h-screen bg-stone-50 p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsx("h2",{className:"text-2xl font-bold sm:text-3xl",children:"Журнал тренировок"}),e.jsx(j,{to:"/new",className:"w-full sm:w-auto",children:e.jsx("button",{className:"w-full rounded-lg bg-yellow-500 px-4 py-2 text-lg font-medium text-white transition-all hover:bg-yellow-400 hover:shadow-md focus-visible:ring-2 focus-visible:ring-yellow-400 focus-visible:ring-offset-2 focus-visible:outline-none sm:px-6 sm:py-3 sm:text-xl",children:"+ новая тренировка"})})]}),e.jsxs("div",{className:"mt-6 flex flex-col justify-between gap-4 border-b border-stone-200 pb-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 sm:flex-nowrap sm:gap-4",children:[e.jsxs(w,{value:x,onValueChange:I,children:[e.jsx(N,{className:"w-full min-w-[180px] rounded-md bg-stone-100 px-4 py-2 shadow-sm sm:w-[250px]",children:e.jsx(v,{placeholder:"Все инструменты"})}),e.jsxs(k,{children:[e.jsx(p,{value:"all",children:"Все инструменты"}),Object.entries(h).map(([s,t])=>e.jsx(p,{value:s,children:t},s))]})]}),e.jsxs(w,{value:m,onValueChange:z,children:[e.jsx(N,{className:"w-full min-w-[180px] rounded-md bg-stone-100 px-4 py-2 shadow-sm sm:w-[250px]",children:e.jsx(v,{placeholder:"Все типы"})}),e.jsxs(k,{children:[e.jsx(p,{value:"all",children:"Все типы"}),Object.entries(g).map(([s,t])=>e.jsx(p,{value:s,children:t},s))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("table"),className:d("px-3 py-1.5 text-sm font-medium transition-colors",l==="table"?"border-b-2 border-yellow-400 text-black":"text-stone-500 hover:text-black"),"aria-label":"Табличный вид",children:"Таблица"}),e.jsx("button",{onClick:()=>r("cards"),className:d("px-3 py-1.5 text-sm font-medium transition-colors",l==="cards"?"border-b-2 border-yellow-400 text-black":"text-stone-500 hover:text-black"),"aria-label":"Вид карточек",children:"Карточки"})]})]}),l==="table"?e.jsx("div",{className:"mt-4 overflow-x-auto rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:[{label:"Дата",className:"min-w-[120px]"},{label:"Название",className:"min-w-[180px]"},{label:"Описание",className:"min-w-[240px]"},{label:"Тип",className:"min-w-[120px]"},{label:"Инструмент",className:"min-w-[120px]"},{label:"Сложность",className:"min-w-[120px]"},{label:"Время",className:"min-w-[100px]"},{label:"",className:"w-16"}].map((s,t)=>e.jsx("th",{className:d("px-4 py-3 text-left text-sm font-medium text-gray-700",s.className),children:s.label},t))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.length>0?o.map((s,t)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap text-gray-700",children:S(new Date(s.date),"dd.MM.yyy")}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-yellow-600",children:e.jsx(j,{to:`/train/${s.id}`,className:"hover:underline",children:s.name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsx("div",{className:"line-clamp-2",children:s.description})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.type.map(a=>a&&e.jsx("span",{className:"rounded-full bg-stone-100 px-2.5 py-1 text-xs font-medium",children:g[a]},a))})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap text-gray-700",children:h[s.instrument]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(a=>e.jsx(E,{size:16,className:d("fill-current",a<=s.difficulty?"text-yellow-500":"text-gray-300")},a))})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:T(s.timer)||"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{className:"rounded-full p-1 text-gray-400 hover:bg-red-50 hover:text-red-500","aria-label":`Удалить тренировку ${s.name}`,onClick:()=>y(s.id),children:e.jsx(M,{size:18})})})]},t)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-gray-500",children:"Нет данных для отображения"})})})]})}):e.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:o.length>0?o.map(s=>e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-md",children:[e.jsx("div",{className:"flex h-40 items-center justify-center bg-gray-50 p-4",children:e.jsx("img",{src:_(`trainType/${s.instrument}.webp`),alt:h[s.instrument],className:"h-full w-full object-contain"})}),e.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:S(new Date(s.date),"dd.MM.yyy")}),e.jsx("button",{className:"text-gray-400 hover:text-red-500","aria-label":`Удалить тренировку ${s.name}`,onClick:()=>y(s.id),children:e.jsx(M,{size:16})})]}),e.jsx(j,{to:`/train/${s.id}`,className:"mt-2 block",children:e.jsx("h3",{className:"text-lg font-medium text-yellow-600 hover:underline",children:s.name})}),e.jsx("p",{className:"line-clamp-3 text-sm text-gray-600",children:s.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1 pb-2",children:s.type.map(t=>t&&e.jsx("span",{className:"rounded-full bg-stone-100 px-2 py-1 text-xs font-medium text-gray-700",children:g[t]},t))}),e.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:h[s.instrument]}),e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(t=>e.jsx(E,{size:16,className:d("fill-current",t<=s.difficulty?"text-yellow-500":"text-gray-300")},t))})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Время тренировки: ",T(s.timer)||"-"]})]})]},s.id)):e.jsx("div",{className:"col-span-full rounded-lg border-2 border-dashed border-gray-300 py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Нет данных для отображения"})})})]})})};export{O as default};
