import{b as Mt,j as o,a as E,r as i,P as G,R as M,u as At,d as Dt}from"./index-CP0-hZoR.js";import{e as Ot,u as U,f as W,g as Me,h as N,P,i as _,j as be,k as Ae,l as De,m as Oe,S as Ft,a as Gt,b as Lt,c as Vt,d as Bt,n as Ne,o as Fe,p as Ge,R as Ut,A as zt,q as Ht,r as $t,D as Kt,C as Yt,s as qt,t as Wt,v as Xt,w as Jt}from"./select-B49Mq02J.js";const Re=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ke=Mt,Le=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return ke(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=t,l=Object.keys(s).map(f=>{const m=n==null?void 0:n[f],d=a==null?void 0:a[f];if(m===null)return null;const x=Re(m)||Re(d);return s[f][x]}),c=n&&Object.entries(n).reduce((f,m)=>{let[d,x]=m;return x===void 0||(f[d]=x),f},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((f,m)=>{let{class:d,className:x,...p}=m;return Object.entries(p).every(v=>{let[b,g]=v;return Array.isArray(g)?g.includes({...a,...c}[b]):{...a,...c}[b]===g})?[...f,d,x]:f},[]);return ke(e,l,u,n==null?void 0:n.class,n==null?void 0:n.className)},Qt=Le("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Y({className:e,variant:t,size:n,asChild:r=!1,...s}){const a=r?Ot:"button";return o.jsx(a,{"data-slot":"button",className:E(Qt({variant:t,size:n,className:e})),...s})}var Ve=["PageUp","PageDown"],Be=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ue={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$="Slider",[ce,Zt,en]=Me($),[ze,Er]=W($,[en]),[tn,te]=ze($),He=i.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:a=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[r],value:m,onValueChange:d=()=>{},onValueCommit:x=()=>{},inverted:p=!1,form:v,...b}=e,g=i.useRef(new Set),h=i.useRef(0),w=l==="horizontal"?nn:rn,[C=[],S]=U({prop:m,defaultProp:f,onChange:R=>{var F;(F=[...g.current][h.current])==null||F.focus(),d(R)}}),T=i.useRef(C);function k(R){const A=cn(C,R);O(R,A)}function j(R){O(R,h.current)}function D(){const R=T.current[h.current];C[h.current]!==R&&x(C)}function O(R,A,{commit:F}={commit:!1}){const ae=mn(a),K=pn(Math.round((R-r)/a)*a+r,ae),I=Ae(K,[r,s]);S((z=[])=>{const B=an(z,I,A);if(fn(B,u*a)){h.current=B.indexOf(I);const je=String(B)!==String(z);return je&&F&&x(B),je?B:z}else return z})}return o.jsx(tn,{scope:e.__scopeSlider,name:n,disabled:c,min:r,max:s,valueIndexToChangeRef:h,thumbs:g.current,values:C,orientation:l,form:v,children:o.jsx(ce.Provider,{scope:e.__scopeSlider,children:o.jsx(ce.Slot,{scope:e.__scopeSlider,children:o.jsx(w,{"aria-disabled":c,"data-disabled":c?"":void 0,...b,ref:t,onPointerDown:N(b.onPointerDown,()=>{c||(T.current=C)}),min:r,max:s,inverted:p,onSlideStart:c?void 0:k,onSlideMove:c?void 0:j,onSlideEnd:c?void 0:D,onHomeKeyDown:()=>!c&&O(r,0,{commit:!0}),onEndKeyDown:()=>!c&&O(s,C.length-1,{commit:!0}),onStepKeyDown:({event:R,direction:A})=>{if(!c){const K=Ve.includes(R.key)||R.shiftKey&&Be.includes(R.key)?10:1,I=h.current,z=C[I],B=a*K*A;O(z+B,I,{commit:!0})}}})})})})});He.displayName=$;var[$e,Ke]=ze($,{startEdge:"left",endEdge:"right",size:"width",direction:1}),nn=i.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:f,...m}=e,[d,x]=i.useState(null),p=_(t,w=>x(w)),v=i.useRef(void 0),b=be(s),g=b==="ltr",h=g&&!a||!g&&a;function y(w){const C=v.current||d.getBoundingClientRect(),S=[0,C.width],k=ye(S,h?[n,r]:[r,n]);return v.current=C,k(w-C.left)}return o.jsx($e,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:o.jsx(Ye,{dir:b,"data-orientation":"horizontal",...m,ref:p,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const C=y(w.clientX);l==null||l(C)},onSlideMove:w=>{const C=y(w.clientX);c==null||c(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:w=>{const S=Ue[h?"from-left":"from-right"].includes(w.key);f==null||f({event:w,direction:S?-1:1})}})})}),rn=i.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...f}=e,m=i.useRef(null),d=_(t,m),x=i.useRef(void 0),p=!s;function v(b){const g=x.current||m.current.getBoundingClientRect(),h=[0,g.height],w=ye(h,p?[r,n]:[n,r]);return x.current=g,w(b-g.top)}return o.jsx($e,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:o.jsx(Ye,{"data-orientation":"vertical",...f,ref:d,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const g=v(b.clientY);a==null||a(g)},onSlideMove:b=>{const g=v(b.clientY);l==null||l(g)},onSlideEnd:()=>{x.current=void 0,c==null||c()},onStepKeyDown:b=>{const h=Ue[p?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:h?-1:1})}})})}),Ye=i.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...f}=e,m=te($,n);return o.jsx(P.span,{...f,ref:t,onKeyDown:N(e.onKeyDown,d=>{d.key==="Home"?(l(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):Ve.concat(Be).includes(d.key)&&(u(d),d.preventDefault())}),onPointerDown:N(e.onPointerDown,d=>{const x=d.target;x.setPointerCapture(d.pointerId),d.preventDefault(),m.thumbs.has(x)?x.focus():r(d)}),onPointerMove:N(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&s(d)}),onPointerUp:N(e.onPointerUp,d=>{const x=d.target;x.hasPointerCapture(d.pointerId)&&(x.releasePointerCapture(d.pointerId),a(d))})})}),qe="SliderTrack",We=i.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=te(qe,n);return o.jsx(P.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});We.displayName=qe;var ue="SliderRange",Xe=i.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=te(ue,n),a=Ke(ue,n),l=i.useRef(null),c=_(t,l),u=s.values.length,f=s.values.map(x=>Ze(x,s.min,s.max)),m=u>1?Math.min(...f):0,d=100-Math.max(...f);return o.jsx(P.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:c,style:{...e.style,[a.startEdge]:m+"%",[a.endEdge]:d+"%"}})});Xe.displayName=ue;var de="SliderThumb",Je=i.forwardRef((e,t)=>{const n=Zt(e.__scopeSlider),[r,s]=i.useState(null),a=_(t,c=>s(c)),l=i.useMemo(()=>r?n().findIndex(c=>c.ref.current===r):-1,[n,r]);return o.jsx(on,{...e,ref:a,index:l})}),on=i.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...a}=e,l=te(de,n),c=Ke(de,n),[u,f]=i.useState(null),m=_(t,y=>f(y)),d=u?l.form||!!u.closest("form"):!0,x=De(u),p=l.values[r],v=p===void 0?0:Ze(p,l.min,l.max),b=ln(r,l.values.length),g=x==null?void 0:x[c.size],h=g?un(g,v,c.direction):0;return i.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${v}% + ${h}px)`},children:[o.jsx(ce.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(P.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":l.min,"aria-valuenow":p,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:m,style:p===void 0?{display:"none"}:e.style,onFocus:N(e.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),d&&o.jsx(Qe,{name:s??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:p},r)]})});Je.displayName=de;var sn="RadioBubbleInput",Qe=i.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=i.useRef(null),a=_(s,r),l=Oe(t);return i.useEffect(()=>{const c=s.current;if(!c)return;const u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==t&&m){const d=new Event("input",{bubbles:!0});m.call(c,t),c.dispatchEvent(d)}},[l,t]),o.jsx(P.input,{style:{display:"none"},...n,ref:a,defaultValue:t})});Qe.displayName=sn;function an(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,a)=>s-a)}function Ze(e,t,n){const a=100/(n-t)*(e-t);return Ae(a,[0,100])}function ln(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function cn(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function un(e,t,n){const r=e/2,a=ye([0,50],[0,r]);return(r-a(t)*n)*n}function dn(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function fn(e,t){if(t>0){const n=dn(e);return Math.min(...n)>=t}return!0}function ye(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function mn(e){return(String(e).split(".")[1]||"").length}function pn(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var xn=He,gn=We,hn=Xe,vn=Je;function bn({className:e,defaultValue:t,value:n,min:r=0,max:s=100,...a}){const l=i.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,s],[n,t,r,s]);return o.jsxs(xn,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:s,className:E("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...a,children:[o.jsx(gn,{"data-slot":"slider-track",className:E("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:o.jsx(hn,{"data-slot":"slider-range",className:E("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:l.length},(c,u)=>o.jsx(vn,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}const Pe=40,Ee=280,yn=[{name:"1/4",value:1},{name:"2/4",value:2},{name:"3/4",value:3},{name:"4/4",value:4},{name:"6/8",value:6}],wn=({className:e})=>{const[t,n]=i.useState(120),[r,s]=i.useState(!1),[a,l]=i.useState(0),[c,u]=i.useState(4),[f,m]=i.useState(!1),[d,x]=i.useState(!1),p=i.useRef(null),v=i.useRef(null),b=i.useRef(a);i.useEffect(()=>{b.current=a},[a]),i.useEffect(()=>{x(!0);const T=setTimeout(()=>x(!1),3700);return()=>clearTimeout(T)},[]),i.useEffect(()=>{l(0)},[c,t]),i.useEffect(()=>{if(r){const T=60/t*1e3;v.current=setInterval(w,T)}else h();return h},[r,t,c]);const g=i.useCallback(()=>{p.current||(p.current=new(window.AudioContext||window.webkitAudioContext)),p.current.state==="suspended"&&p.current.resume()},[]),h=i.useCallback(()=>{v.current&&(clearInterval(v.current),v.current=null)},[]),y=i.useCallback((T,k)=>{if(!p.current)return;const j=p.current.createOscillator(),D=p.current.createGain();j.type="sine",j.frequency.value=T,D.gain.value=.5,j.connect(D),D.connect(p.current.destination),j.start(),D.gain.exponentialRampToValueAtTime(.001,p.current.currentTime+k),j.stop(p.current.currentTime+k)},[]),w=i.useCallback(()=>{const T=b.current%c===0;y(T?1200:800,T?.1:.05),l(k=>(k+1)%c)},[c,y]),C=i.useCallback(()=>{g(),s(T=>(T||l(0),!T))},[g]),S=i.useCallback(T=>{n(Math.max(Pe,Math.min(Ee,T)))},[]);return o.jsxs("div",{className:`absolute right-0 flex items-center ${d?"animate-bounce-left-twice":""}`,children:[o.jsxs(Y,{type:"button",onClick:()=>m(!f),className:`right-0 flex h-[140px] w-4 flex-col gap-6 rounded-tr-none rounded-br-none border-1 border-gray-100 bg-white text-black shadow-2xl duration-300 hover:border-0 hover:bg-yellow-400 hover:text-white ${f?"absolute right-0":""} `,children:[o.jsx("span",{className:"mb-6 rotate-90 transform pl-12 whitespace-nowrap",children:"Метроном"}),f?o.jsx("span",{className:"text-2xl",children:"⥃"}):o.jsx("span",{className:"text-2xl",children:"⥂"})]}),o.jsxs("div",{className:`top-0 right-full z-10 mr-4 mb-4 flex flex-col items-center gap-2 rounded-lg border border-gray-100 bg-white p-2 shadow-md transition-all duration-300 ease-in-out ${f?"pointer-events-none translate-x-4 opacity-0":"translate-x-0 opacity-100"} ${e} `,children:[o.jsx("img",{className:"h-25",src:G.METRONOME_IMG,alt:"Metronome Icon"}),o.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Y,{type:"button",onClick:()=>S(t-1),className:"bg-white-600 flex h-8 w-8 items-center justify-center rounded-full border-1 border-black text-black duration-300 hover:bg-black hover:text-white hover:shadow-xl",children:"-"}),o.jsxs("p",{className:"font-mono text-xl",children:[t," BPM"]}),o.jsx(Y,{type:"button",onClick:()=>S(t+1),className:"bg-white-600 flex h-8 w-8 items-center justify-center rounded-full border-1 border-black text-black duration-300 hover:bg-black hover:text-white hover:shadow-xl",children:"+"})]}),o.jsx(bn,{defaultValue:[120],step:1,onValueChange:T=>S(T[0]),min:Pe,max:Ee,value:[t]})]}),o.jsxs("div",{className:"w-full",children:[o.jsx("label",{htmlFor:"tsize",children:"Тактовый размер"}),o.jsxs(Ft,{onValueChange:T=>u(parseInt(T)),defaultValue:String(c),children:[o.jsx(Gt,{id:"tsize",className:"w-full",children:o.jsx(Lt,{placeholder:"Размер"})}),o.jsx(Vt,{children:yn.map(T=>o.jsx(Bt,{value:String(T.value),children:T.name},T.value))})]})]}),o.jsx(Y,{type:"button",onClick:C,className:`w-full rounded-lg px-6 py-6 text-4xl text-white ${r?"bg-red-600 hover:bg-red-700":"bg-yellow-500 hover:bg-yellow-400"}`,children:r?"■":"▶"})]})]})};function Cn(e,t){return i.useReducer((n,r)=>t[n][r]??n,e)}var ne=e=>{const{present:t,children:n}=e,r=Tn(t),s=typeof n=="function"?n({present:r.isPresent}):i.Children.only(n),a=_(r.ref,Sn(s));return typeof n=="function"||r.isPresent?i.cloneElement(s,{ref:a}):null};ne.displayName="Presence";function Tn(e){const[t,n]=i.useState(),r=i.useRef(null),s=i.useRef(e),a=i.useRef("none"),l=e?"mounted":"unmounted",[c,u]=Cn(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const f=Q(r.current);a.current=c==="mounted"?f:"none"},[c]),Ne(()=>{const f=r.current,m=s.current;if(m!==e){const x=a.current,p=Q(f);e?u("MOUNT"):p==="none"||(f==null?void 0:f.display)==="none"?u("UNMOUNT"):u(m&&x!==p?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),Ne(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,d=p=>{const b=Q(r.current).includes(p.animationName);if(p.target===t&&b&&(u("ANIMATION_END"),!s.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},x=p=>{p.target===t&&(a.current=Q(r.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:i.useCallback(f=>{r.current=f?getComputedStyle(f):null,n(f)},[])}}function Q(e){return(e==null?void 0:e.animationName)||"none"}function Sn(e){var r,s;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var[re,Ir]=W("Tooltip",[Fe]),oe=Fe(),et="TooltipProvider",jn=700,fe="tooltip.open",[Nn,we]=re(et),tt=e=>{const{__scopeTooltip:t,delayDuration:n=jn,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,l=i.useRef(!0),c=i.useRef(!1),u=i.useRef(0);return i.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),o.jsx(Nn,{scope:t,isOpenDelayedRef:l,delayDuration:n,onOpen:i.useCallback(()=>{window.clearTimeout(u.current),l.current=!1},[]),onClose:i.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:i.useCallback(f=>{c.current=f},[]),disableHoverableContent:s,children:a})};tt.displayName=et;var q="Tooltip",[Rn,X]=re(q),nt=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:l,delayDuration:c}=e,u=we(q,e.__scopeTooltip),f=oe(t),[m,d]=i.useState(null),x=Ge(),p=i.useRef(0),v=l??u.disableHoverableContent,b=c??u.delayDuration,g=i.useRef(!1),[h,y]=U({prop:r,defaultProp:s??!1,onChange:k=>{k?(u.onOpen(),document.dispatchEvent(new CustomEvent(fe))):u.onClose(),a==null||a(k)},caller:q}),w=i.useMemo(()=>h?g.current?"delayed-open":"instant-open":"closed",[h]),C=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,y(!0)},[y]),S=i.useCallback(()=>{window.clearTimeout(p.current),p.current=0,y(!1)},[y]),T=i.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,y(!0),p.current=0},b)},[b,y]);return i.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),o.jsx(Ut,{...f,children:o.jsx(Rn,{scope:t,contentId:x,open:h,stateAttribute:w,trigger:m,onTriggerChange:d,onTriggerEnter:i.useCallback(()=>{u.isOpenDelayedRef.current?T():C()},[u.isOpenDelayedRef,T,C]),onTriggerLeave:i.useCallback(()=>{v?S():(window.clearTimeout(p.current),p.current=0)},[S,v]),onOpen:C,onClose:S,disableHoverableContent:v,children:n})})};nt.displayName=q;var me="TooltipTrigger",rt=i.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=X(me,n),a=we(me,n),l=oe(n),c=i.useRef(null),u=_(t,c,s.onTriggerChange),f=i.useRef(!1),m=i.useRef(!1),d=i.useCallback(()=>f.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),o.jsx(zt,{asChild:!0,...l,children:o.jsx(P.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:u,onPointerMove:N(e.onPointerMove,x=>{x.pointerType!=="touch"&&!m.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),m.current=!0)}),onPointerLeave:N(e.onPointerLeave,()=>{s.onTriggerLeave(),m.current=!1}),onPointerDown:N(e.onPointerDown,()=>{s.open&&s.onClose(),f.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:N(e.onFocus,()=>{f.current||s.onOpen()}),onBlur:N(e.onBlur,s.onClose),onClick:N(e.onClick,s.onClose)})})});rt.displayName=me;var Ce="TooltipPortal",[kn,Pn]=re(Ce,{forceMount:void 0}),ot=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=X(Ce,t);return o.jsx(kn,{scope:t,forceMount:n,children:o.jsx(ne,{present:n||a.open,children:o.jsx(Ht,{asChild:!0,container:s,children:r})})})};ot.displayName=Ce;var H="TooltipContent",st=i.forwardRef((e,t)=>{const n=Pn(H,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,l=X(H,e.__scopeTooltip);return o.jsx(ne,{present:r||l.open,children:l.disableHoverableContent?o.jsx(at,{side:s,...a,ref:t}):o.jsx(En,{side:s,...a,ref:t})})}),En=i.forwardRef((e,t)=>{const n=X(H,e.__scopeTooltip),r=we(H,e.__scopeTooltip),s=i.useRef(null),a=_(t,s),[l,c]=i.useState(null),{trigger:u,onClose:f}=n,m=s.current,{onPointerInTransitChange:d}=r,x=i.useCallback(()=>{c(null),d(!1)},[d]),p=i.useCallback((v,b)=>{const g=v.currentTarget,h={x:v.clientX,y:v.clientY},y=An(h,g.getBoundingClientRect()),w=Dn(h,y),C=On(b.getBoundingClientRect()),S=Gn([...w,...C]);c(S),d(!0)},[d]);return i.useEffect(()=>()=>x(),[x]),i.useEffect(()=>{if(u&&m){const v=g=>p(g,m),b=g=>p(g,u);return u.addEventListener("pointerleave",v),m.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",v),m.removeEventListener("pointerleave",b)}}},[u,m,p,x]),i.useEffect(()=>{if(l){const v=b=>{const g=b.target,h={x:b.clientX,y:b.clientY},y=(u==null?void 0:u.contains(g))||(m==null?void 0:m.contains(g)),w=!Fn(h,l);y?x():w&&(x(),f())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,m,l,f,x]),o.jsx(at,{...e,ref:a})}),[In,_n]=re(q,{isInside:!1}),Mn=qt("TooltipContent"),at=i.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:l,...c}=e,u=X(H,n),f=oe(n),{onClose:m}=u;return i.useEffect(()=>(document.addEventListener(fe,m),()=>document.removeEventListener(fe,m)),[m]),i.useEffect(()=>{if(u.trigger){const d=x=>{const p=x.target;p!=null&&p.contains(u.trigger)&&m()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[u.trigger,m]),o.jsx(Kt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:d=>d.preventDefault(),onDismiss:m,children:o.jsxs(Yt,{"data-state":u.stateAttribute,...f,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(Mn,{children:r}),o.jsx(In,{scope:n,isInside:!0,children:o.jsx(Wt,{id:u.contentId,role:"tooltip",children:s||r})})]})})});st.displayName=H;var it="TooltipArrow",lt=i.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=oe(n);return _n(it,n).isInside?null:o.jsx($t,{...s,...r,ref:t})});lt.displayName=it;function An(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Dn(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function On(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Fn(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,l=t.length-1;a<t.length;l=a++){const c=t[a],u=t[l],f=c.x,m=c.y,d=u.x,x=u.y;m>r!=x>r&&n<(d-f)*(r-m)/(x-m)+f&&(s=!s)}return s}function Gn(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Ln(t)}function Ln(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],l=t[t.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],l=n[n.length-2];if((a.x-l.x)*(s.y-l.y)>=(a.y-l.y)*(s.x-l.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Vn=tt,Bn=nt,Un=rt,zn=ot,Hn=st,$n=lt;function Kn({delayDuration:e=0,...t}){return o.jsx(Vn,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function pe({...e}){return o.jsx(Kn,{children:o.jsx(Bn,{"data-slot":"tooltip",...e})})}function xe({...e}){return o.jsx(Un,{"data-slot":"tooltip-trigger",...e})}function ge({className:e,sideOffset:t=0,children:n,...r}){return o.jsx(zn,{children:o.jsxs(Hn,{"data-slot":"tooltip-content",sideOffset:t,className:E("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,o.jsx($n,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Z=e=>e.toString().padStart(2,"0"),Ie=({label:e,onClick:t,variant:n,className:r,size:s="md"})=>{const a={primary:"bg-yellow-500 hover:bg-yellow-400 focus-visible:ring-yellow-400 text-white",secondary:"bg-gray-600 hover:bg-gray-700 focus-visible:ring-gray-500 text-white",danger:"bg-red-600 hover:bg-red-700 focus-visible:ring-red-500 text-white"},l={sm:"h-8 px-4 py-1 text-sm",md:"h-10 px-5 py-2 text-base",lg:"h-12 px-6 py-3 text-lg"};return o.jsx(Y,{type:"button",onClick:t,className:E("rounded-md font-medium transition-all","focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none","active:scale-95",a[n],l[s],r),children:e})};function he({className:e,type:t,...n}){return o.jsx("input",{type:t,"data-slot":"input",className:E("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const ie=({id:e,value:t,min:n,max:r,label:s,onChange:a,className:l})=>o.jsxs("div",{className:E("w-full sm:w-1/3 lg:h-[100px] lg:w-[100px]",l),children:[o.jsx("div",{className:"relative",children:o.jsx(he,{id:e,type:"number",min:n,max:r,value:Z(t),onChange:c=>{const u=Math.min(r,Math.max(n,Number(c.target.value)));a(u)},className:E("h-12 bg-white text-center text-xl sm:text-2xl","[appearance:textfield] px-2 py-1","[&::-webkit-outer-spin-button]:m-0 [&::-webkit-outer-spin-button]:appearance-none","[&::-webkit-inner-spin-button]:m-0 [&::-webkit-inner-spin-button]:appearance-none","focus-visible:ring-2 focus-visible:ring-yellow-400 focus-visible:ring-offset-2")})}),o.jsx("label",{htmlFor:e,className:"mt-1 block text-center text-sm font-medium text-gray-600 sm:text-base",children:s})]}),Yn=()=>{const[e,t]=i.useState(0),[n,r]=i.useState(!1),s=i.useRef(null),{hours:a,minutes:l,seconds:c}=i.useMemo(()=>({hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60}),[e]),u=i.useMemo(()=>`${Z(a)}:${Z(l)}:${Z(c)}`,[a,l,c]),f=i.useCallback(()=>{s.current&&(clearInterval(s.current),s.current=null)},[]),m=i.useCallback(()=>{t(0)},[]),d=i.useCallback(()=>{r(p=>!p)},[]),x=i.useCallback((p,v)=>{const g=Math.max(0,Math.min(p==="hours"?24:59,v));t(h=>{const y={hours:Math.floor(h/3600),minutes:Math.floor(h%3600/60),seconds:h%60};return p==="hours"?g*3600+y.minutes*60+y.seconds:p==="minutes"?y.hours*3600+g*60+y.seconds:y.hours*3600+y.minutes*60+g})},[]);return i.useEffect(()=>(n?s.current=setInterval(()=>{t(p=>p+1)},1e3):f(),f),[n,f]),o.jsx("div",{className:"w-full px-2 sm:px-4",children:o.jsxs("fieldset",{className:"flex flex-col items-center space-y-4",children:[o.jsx("legend",{className:"sr-only",children:"Таймер тренировки"}),o.jsx("input",{type:"hidden",name:"time",id:"timer",value:u}),o.jsxs("div",{className:"flex w-full flex-col gap-4 sm:flex-row sm:justify-center sm:gap-6",children:[o.jsxs(pe,{children:[o.jsx(xe,{asChild:!0,children:o.jsx(Ie,{label:n?"⏸︎":"▶",onClick:d,variant:n?"danger":"primary",size:"lg","aria-label":n?"Пауза":"Старт"})}),o.jsx(ge,{children:n?"Остановить таймер":"Запустить таймер"})]}),o.jsxs("div",{className:"flex w-full flex-col items-center gap-4 sm:w-auto sm:flex-row sm:gap-6",children:[o.jsx(ie,{id:"timerHours",value:a,min:0,max:24,label:"Часы",onChange:p=>x("hours",p)}),o.jsx(ie,{id:"timerMinutes",value:l,min:0,max:59,label:"Минуты",onChange:p=>x("minutes",p)}),o.jsx(ie,{id:"timerSeconds",value:c,min:0,max:59,label:"Секунды",onChange:p=>x("seconds",p)})]}),o.jsxs(pe,{children:[o.jsx(xe,{asChild:!0,children:o.jsx(Ie,{label:"↻",onClick:m,variant:"secondary",size:"lg","aria-label":"Сбросить"})}),o.jsx(ge,{children:"Сбросить таймер"})]})]})]})})};function qn({className:e,...t}){return o.jsx("textarea",{"data-slot":"textarea",className:E("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const Wn=({value:e,onChange:t})=>{const[n,r]=i.useState(null);return o.jsxs("fieldset",{className:"mt-3 flex flex-col items-center",children:[o.jsx("legend",{className:"text-center",children:"Сложность:"}),o.jsxs("div",{className:"flex items-center space-x-1",children:[[1,2,3,4,5].map(s=>o.jsx("button",{type:"button",className:`difficulty-star text-4xl transition-colors ${(n??e)>=s?"text-yellow-400":"text-gray-300"}`,onMouseEnter:()=>r(s),onMouseLeave:()=>r(null),onClick:()=>t(s),"aria-label":`Оценка ${s}`,children:"★"},s)),o.jsx("input",{type:"hidden",name:"difficulty",value:e})]})]})};var le="rovingFocusGroup.onEntryFocus",Xn={bubbles:!1,cancelable:!0},J="RovingFocusGroup",[ve,ct,Jn]=Me(J),[Qn,ut]=W(J,[Jn]),[Zn,er]=Qn(J),dt=i.forwardRef((e,t)=>o.jsx(ve.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(ve.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(tr,{...e,ref:t})})}));dt.displayName=J;var tr=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...d}=e,x=i.useRef(null),p=_(t,x),v=be(a),[b,g]=U({prop:l,defaultProp:c??null,onChange:u,caller:J}),[h,y]=i.useState(!1),w=Xt(f),C=ct(n),S=i.useRef(!1),[T,k]=i.useState(0);return i.useEffect(()=>{const j=x.current;if(j)return j.addEventListener(le,w),()=>j.removeEventListener(le,w)},[w]),o.jsx(Zn,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:b,onItemFocus:i.useCallback(j=>g(j),[g]),onItemShiftTab:i.useCallback(()=>y(!0),[]),onFocusableItemAdd:i.useCallback(()=>k(j=>j+1),[]),onFocusableItemRemove:i.useCallback(()=>k(j=>j-1),[]),children:o.jsx(P.div,{tabIndex:h||T===0?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:N(e.onMouseDown,()=>{S.current=!0}),onFocus:N(e.onFocus,j=>{const D=!S.current;if(j.target===j.currentTarget&&D&&!h){const O=new CustomEvent(le,Xn);if(j.currentTarget.dispatchEvent(O),!O.defaultPrevented){const R=C().filter(I=>I.focusable),A=R.find(I=>I.active),F=R.find(I=>I.id===b),K=[A,F,...R].filter(Boolean).map(I=>I.ref.current);pt(K,m)}}S.current=!1}),onBlur:N(e.onBlur,()=>y(!1))})})}),ft="RovingFocusGroupItem",mt=i.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:l,...c}=e,u=Ge(),f=a||u,m=er(ft,n),d=m.currentTabStopId===f,x=ct(n),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:b}=m;return i.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),o.jsx(ve.ItemSlot,{scope:n,id:f,focusable:r,active:s,children:o.jsx(P.span,{tabIndex:d?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:N(e.onMouseDown,g=>{r?m.onItemFocus(f):g.preventDefault()}),onFocus:N(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:N(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){m.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const h=or(g,m.orientation,m.dir);if(h!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let w=x().filter(C=>C.focusable).map(C=>C.ref.current);if(h==="last")w.reverse();else if(h==="prev"||h==="next"){h==="prev"&&w.reverse();const C=w.indexOf(g.currentTarget);w=m.loop?sr(w,C+1):w.slice(C+1)}setTimeout(()=>pt(w))}}),children:typeof l=="function"?l({isCurrentTabStop:d,hasTabStop:b!=null}):l})})});mt.displayName=ft;var nr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function rr(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function or(e,t,n){const r=rr(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return nr[r]}function pt(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function sr(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var ar=dt,ir=mt,xt="Toggle",gt=i.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[l,c]=U({prop:n,onChange:s,defaultProp:r??!1,caller:xt});return o.jsx(P.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:N(e.onClick,()=>{e.disabled||c(!l)})})});gt.displayName=xt;var V="ToggleGroup",[ht,_r]=W(V,[ut]),vt=ut(),Te=M.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return o.jsx(lr,{...s,ref:t})}if(n==="multiple"){const s=r;return o.jsx(cr,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${V}\``)});Te.displayName=V;var[bt,yt]=ht(V),lr=M.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[l,c]=U({prop:n,defaultProp:r??"",onChange:s,caller:V});return o.jsx(bt,{scope:e.__scopeToggleGroup,type:"single",value:M.useMemo(()=>l?[l]:[],[l]),onItemActivate:c,onItemDeactivate:M.useCallback(()=>c(""),[c]),children:o.jsx(wt,{...a,ref:t})})}),cr=M.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[l,c]=U({prop:n,defaultProp:r??[],onChange:s,caller:V}),u=M.useCallback(m=>c((d=[])=>[...d,m]),[c]),f=M.useCallback(m=>c((d=[])=>d.filter(x=>x!==m)),[c]);return o.jsx(bt,{scope:e.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:u,onItemDeactivate:f,children:o.jsx(wt,{...a,ref:t})})});Te.displayName=V;var[ur,dr]=ht(V),wt=M.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:l,loop:c=!0,...u}=e,f=vt(n),m=be(l),d={role:"group",dir:m,...u};return o.jsx(ur,{scope:n,rovingFocus:s,disabled:r,children:s?o.jsx(ar,{asChild:!0,...f,orientation:a,dir:m,loop:c,children:o.jsx(P.div,{...d,ref:t})}):o.jsx(P.div,{...d,ref:t})})}),ee="ToggleGroupItem",Ct=M.forwardRef((e,t)=>{const n=yt(ee,e.__scopeToggleGroup),r=dr(ee,e.__scopeToggleGroup),s=vt(e.__scopeToggleGroup),a=n.value.includes(e.value),l=r.disabled||e.disabled,c={...e,pressed:a,disabled:l},u=M.useRef(null);return r.rovingFocus?o.jsx(ir,{asChild:!0,...s,focusable:!l,active:a,ref:u,children:o.jsx(_e,{...c,ref:t})}):o.jsx(_e,{...c,ref:t})});Ct.displayName=ee;var _e=M.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=yt(ee,n),l={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},c=a.type==="single"?l:void 0;return o.jsx(gt,{...c,...s,ref:t,onPressedChange:u=>{u?a.onItemActivate(r):a.onItemDeactivate(r)}})}),fr=Te,mr=Ct;const pr=Le("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),Tt=i.createContext({size:"default",variant:"default"});function xr({className:e,variant:t,size:n,children:r,...s}){return o.jsx(fr,{"data-slot":"toggle-group","data-variant":t,"data-size":n,className:E("group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",e),...s,children:o.jsx(Tt.Provider,{value:{variant:t,size:n},children:r})})}function gr({className:e,children:t,variant:n,size:r,...s}){const a=i.useContext(Tt);return o.jsx(mr,{"data-slot":"toggle-group-item","data-variant":a.variant||n,"data-size":a.size||r,className:E(pr({variant:a.variant||n,size:a.size||r}),"min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",e),...s,children:t})}const hr=[{value:"piano",label:"Клавишные",src:G.INSTRUMENT.PIANO,maxH:"100px"},{value:"drums",label:"Барабаны",src:G.INSTRUMENT.DRUMS,maxH:"100px"},{value:"bass",label:"Бас",src:G.INSTRUMENT.BASS,maxH:"100px"},{value:"eguitar",label:"Электрогитара",src:G.INSTRUMENT.EGUITAR,maxH:"80px"},{value:"acguitar",label:"Акустическая гитара",src:G.INSTRUMENT.AGUITAR,maxH:"80px"},{value:"vocal",label:"Вокал",src:G.INSTRUMENT.MICROPHONE,maxH:"90px"},{value:"other",label:"Другие инструменты",src:G.INSTRUMENT.OTHER,maxH:"100px"}],vr=()=>{const[e,t]=i.useState("eguitar");return o.jsxs("fieldset",{className:"mt-3 flex flex-col items-center justify-center",children:[o.jsx("legend",{className:"text-center",children:"Инструмент:"}),o.jsx(xr,{variant:"outline",value:e,onValueChange:t,type:"single",children:hr.map(({value:n,label:r,src:s,maxH:a})=>o.jsx(gr,{className:"h-[100px]",value:n,children:o.jsxs(pe,{children:[o.jsx(xe,{asChild:!0,children:o.jsx("img",{className:`max-h-[${a}]`,src:s,alt:n})}),o.jsx(ge,{children:r})]})},n))}),o.jsx("input",{type:"hidden",name:"instrument",value:e})]})};var br="Label",St=i.forwardRef((e,t)=>o.jsx(P.label,{...e,ref:t,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));St.displayName=br;var yr=St;function wr({className:e,...t}){return o.jsx(yr,{"data-slot":"label",className:E("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}var se="Checkbox",[Cr,Mr]=W(se),[Tr,Se]=Cr(se);function Sr(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:l,name:c,onCheckedChange:u,required:f,value:m="on",internal_do_not_use_render:d}=e,[x,p]=U({prop:n,defaultProp:s??!1,onChange:u,caller:se}),[v,b]=i.useState(null),[g,h]=i.useState(null),y=i.useRef(!1),w=v?!!l||!!v.closest("form"):!0,C={checked:x,disabled:a,setChecked:p,control:v,setControl:b,name:c,form:l,value:m,hasConsumerStoppedPropagationRef:y,required:f,defaultChecked:L(s)?!1:s,isFormControl:w,bubbleInput:g,setBubbleInput:h};return o.jsx(Tr,{scope:t,...C,children:jr(d)?d(C):r})}var jt="CheckboxTrigger",Nt=i.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:l,disabled:c,checked:u,required:f,setControl:m,setChecked:d,hasConsumerStoppedPropagationRef:x,isFormControl:p,bubbleInput:v}=Se(jt,e),b=_(s,m),g=i.useRef(u);return i.useEffect(()=>{const h=a==null?void 0:a.form;if(h){const y=()=>d(g.current);return h.addEventListener("reset",y),()=>h.removeEventListener("reset",y)}},[a,d]),o.jsx(P.button,{type:"button",role:"checkbox","aria-checked":L(u)?"mixed":u,"aria-required":f,"data-state":_t(u),"data-disabled":c?"":void 0,disabled:c,value:l,...r,ref:b,onKeyDown:N(t,h=>{h.key==="Enter"&&h.preventDefault()}),onClick:N(n,h=>{d(y=>L(y)?!0:!y),v&&p&&(x.current=h.isPropagationStopped(),x.current||h.stopPropagation())})})});Nt.displayName=jt;var Rt=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:l,disabled:c,value:u,onCheckedChange:f,form:m,...d}=e;return o.jsx(Sr,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:c,required:l,onCheckedChange:f,name:r,form:m,value:u,internal_do_not_use_render:({isFormControl:x})=>o.jsxs(o.Fragment,{children:[o.jsx(Nt,{...d,ref:t,__scopeCheckbox:n}),x&&o.jsx(It,{__scopeCheckbox:n})]})})});Rt.displayName=se;var kt="CheckboxIndicator",Pt=i.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=Se(kt,n);return o.jsx(ne,{present:r||L(a.checked)||a.checked===!0,children:o.jsx(P.span,{"data-state":_t(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});Pt.displayName=kt;var Et="CheckboxBubbleInput",It=i.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:l,required:c,disabled:u,name:f,value:m,form:d,bubbleInput:x,setBubbleInput:p}=Se(Et,e),v=_(n,p),b=Oe(a),g=De(r);i.useEffect(()=>{const y=x;if(!y)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,T=!s.current;if(b!==a&&S){const k=new Event("click",{bubbles:T});y.indeterminate=L(a),S.call(y,L(a)?!1:a),y.dispatchEvent(k)}},[x,b,a,s]);const h=i.useRef(L(a)?!1:a);return o.jsx(P.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??h.current,required:c,disabled:u,name:f,value:m,form:d,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});It.displayName=Et;function jr(e){return typeof e=="function"}function L(e){return e==="indeterminate"}function _t(e){return L(e)?"indeterminate":e?"checked":"unchecked"}function Nr({className:e,...t}){return o.jsx(Rt,{"data-slot":"checkbox",className:E("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:o.jsx(Pt,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:o.jsx(Jt,{className:"size-3.5"})})})}const Rr=()=>{const[e,t]=i.useState([]),n=s=>{const a=new Set(e);a.has(s)?a.delete(s):a.add(s),t([...a])},r=[{id:"exercises",label:"Упражения"},{id:"rhythm",label:"Ритмика"},{id:"theory",label:"Теория"},{id:"recording",label:"Запись"},{id:"improvisation",label:"Джем"},{id:"songs",label:"Песни"}];return o.jsxs("fieldset",{className:"mt-4",children:[o.jsx("legend",{children:"Тип тренировки:"}),o.jsxs("div",{className:"grid grid-cols-2 rounded-lg border border-gray-200 p-3 sm:grid-cols-3 md:grid-cols-2 lg:grid-cols-3",children:[r.map(({id:s,label:a})=>o.jsxs("div",{className:"flex space-x-2 p-1",children:[o.jsx(Nr,{checked:e.includes(s),onCheckedChange:()=>n(s),id:s,name:s}),o.jsx(wr,{htmlFor:s,children:a})]},s)),o.jsx("textarea",{name:"type",value:e.join(","),readOnly:!0,hidden:!0})]})]})},Ar=()=>{const{addTraining:e}=At(),t=Dt(),[n,r]=i.useState(0),s=l=>{l.preventDefault();const c=new FormData(l.target),u={id:crypto.randomUUID(),name:String(c.get("name")||""),description:String(c.get("description")||""),date:String(c.get("date")||new Date().toString()),difficulty:Number(c.get("difficulty")||0),instrument:String(c.get("instrument")||""),timer:String(c.get("time")||"00:00:00"),type:String(c.get("type")||"").split(",")};e(u),t("/tracker")};return o.jsxs("div",{className:"mt-15 flex min-h-screen flex-col items-center bg-stone-50 px-4 py-6 sm:px-6 lg:justify-center lg:px-8",children:[o.jsxs("div",{className:"w-full max-w-4xl",children:[o.jsx("div",{className:"flex justify-center",children:o.jsxs("h1",{className:"mb-4 border-b-4 border-yellow-400 pb-2 text-3xl font-bold sm:mb-6 sm:border-b-6 sm:pb-3 sm:text-4xl",children:["Новая ",o.jsx("span",{className:"font-[LogoFont] sm:relative sm:top-2 sm:text-5xl",children:"Ninja"})," тренировка!"]})}),o.jsxs("form",{className:"w-full rounded-2xl border border-gray-100 bg-white p-4 shadow-sm sm:p-6 md:p-8 lg:w-auto",onSubmit:s,children:[o.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:gap-8",children:[o.jsx("div",{className:"w-full md:w-1/2",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"trainName",className:"block text-sm font-medium text-gray-700 sm:text-base",children:"Название тренировки:"}),o.jsx(he,{required:!0,maxLength:50,id:"trainName",name:"name",type:"text",className:"h-10 w-full sm:h-9",placeholder:"Название тренировки"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"trainDescription",className:"block text-sm font-medium text-gray-700 sm:text-base",children:"Описание:"}),o.jsx(qn,{maxLength:100,id:"trainDescription",placeholder:"Описание тренировки",className:"h-24 w-full sm:h-20",name:"description"})]})]})}),o.jsx("div",{className:"w-full md:w-1/2",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"trainDate",className:"block text-sm font-medium text-gray-700 sm:text-base",children:"Дата тренировки:"}),o.jsx(he,{defaultValue:new Date().toISOString().slice(0,10),name:"date",id:"trainDate",type:"date",className:"h-10 w-full sm:h-9"})]}),o.jsx(Rr,{})]})})]}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsx(Wn,{value:n,onChange:r}),o.jsx(vr,{}),o.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 sm:rounded-2xl",children:o.jsx(Yn,{})}),o.jsx("button",{type:"submit",className:"mt-6 w-full rounded-lg bg-yellow-500 px-6 py-3 text-lg md:text-2xl text-white transition-all hover:scale-[1.01] hover:bg-yellow-400 active:scale-95",children:"Записать тренировку"})]})]})]}),o.jsx(wn,{className:"mt-6 w-full rounded-2xl bg-white p-4 shadow-sm sm:p-6"})]})};export{Ar as default};
