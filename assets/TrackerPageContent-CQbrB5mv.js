import{c as C,r as t,t as h,j as e,a as z,L as p,I as x,E as u,b as c,w as D}from"./index-DU-yvZFU.js";import{u as R,S as g,a as w,b as N,c as v,d as m,f as S}from"./useRemoteTraining-Ejm-4cFD.js";import{g as k}from"./TimeFn-C06SccJk.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],T=C("star",_);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],M=C("trash-2",F),W=()=>{const{getTrainings:E,deleteTraining:f}=R(),[I,y]=t.useState([]),[L,j]=t.useState(!0),[o,r]=t.useState(()=>window.innerWidth>=1024?"table":"cards"),[n,V]=t.useState("all"),[i,$]=t.useState("all");t.useEffect(()=>{(async()=>{j(!0);try{const a=await E();y(a)}catch{h.error("Ошибка загрузки тренировок")}finally{j(!1)}})()},[]);const b=t.useCallback(async s=>{try{await f(Number(s)),y(a=>a.filter(l=>l.id!==s)),h.success("Тренировка удалена")}catch{h.error("Ошибка при удалении тренировки")}},[f]);t.useEffect(()=>{window.innerWidth>=1024?r("table"):r("cards")},[]);const d=I.filter(s=>{const a=n==="all"||!n||s.instrument===n,l=i==="all"||!i||s.type.includes(i);return a&&l});return L?e.jsx(z,{}):e.jsx("div",{className:"mt-15 min-h-screen bg-stone-50 p-4 sm:p-6 md:p-8",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col justify-between gap-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsx("h2",{className:"text-2xl font-bold sm:text-3xl",children:"Журнал тренировок"}),e.jsx(p,{to:"/new",className:"w-full sm:w-auto",children:e.jsx("button",{className:"w-full rounded-lg bg-yellow-500 px-4 py-2 text-lg font-medium text-white transition-all hover:bg-yellow-400 hover:shadow-md focus-visible:ring-2 focus-visible:ring-yellow-400 focus-visible:ring-offset-2 focus-visible:outline-none sm:px-6 sm:py-3 sm:text-xl",children:"+ новая тренировка"})})]}),e.jsxs("div",{className:"mt-6 flex flex-col justify-between gap-4 border-b border-stone-200 pb-4 sm:flex-row sm:items-center sm:gap-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 sm:flex-nowrap sm:gap-4",children:[e.jsxs(g,{value:n,onValueChange:V,children:[e.jsx(w,{className:"w-full min-w-[180px] rounded-md bg-stone-100 px-4 py-2 shadow-sm sm:w-[250px]",children:e.jsx(N,{placeholder:"Все инструменты"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"Все инструменты"}),Object.entries(x).map(([s,a])=>e.jsx(m,{value:s,children:a},s))]})]}),e.jsxs(g,{value:i,onValueChange:$,children:[e.jsx(w,{className:"w-full min-w-[180px] rounded-md bg-stone-100 px-4 py-2 shadow-sm sm:w-[250px]",children:e.jsx(N,{placeholder:"Все типы"})}),e.jsxs(v,{children:[e.jsx(m,{value:"all",children:"Все типы"}),Object.entries(u).map(([s,a])=>e.jsx(m,{value:s,children:a},s))]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("table"),className:c("px-3 py-1.5 text-sm font-medium transition-colors",o==="table"?"border-b-2 border-yellow-400 text-black":"text-stone-500 hover:text-black"),"aria-label":"Табличный вид",children:"Таблица"}),e.jsx("button",{onClick:()=>r("cards"),className:c("px-3 py-1.5 text-sm font-medium transition-colors",o==="cards"?"border-b-2 border-yellow-400 text-black":"text-stone-500 hover:text-black"),"aria-label":"Вид карточек",children:"Карточки"})]})]}),o==="table"?e.jsx("div",{className:"mt-4 overflow-x-auto rounded-lg border border-gray-200 bg-white shadow-sm",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{children:[{label:"Дата",className:"min-w-[120px]"},{label:"Название",className:"min-w-[180px]"},{label:"Описание",className:"min-w-[240px]"},{label:"Тип",className:"min-w-[120px]"},{label:"Инструмент",className:"min-w-[120px]"},{label:"Сложность",className:"min-w-[120px]"},{label:"Время",className:"min-w-[100px]"},{label:"",className:"w-16"}].map((s,a)=>e.jsx("th",{className:c("px-4 py-3 text-left text-sm font-medium text-gray-700",s.className),children:s.label},a))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.length>0?d.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap text-gray-700",children:S(new Date(s.date),"dd.MM.yyy")}),e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-yellow-600",children:e.jsx(p,{to:`/train/${s.id}`,className:"hover:underline",children:s.name})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.jsx("div",{className:"line-clamp-2",children:s.description})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.type.map(l=>l&&e.jsx("span",{className:"rounded-full bg-stone-100 px-2.5 py-1 text-xs font-medium",children:u[l]},l))})}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap text-gray-700",children:x[s.instrument]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(l=>e.jsx(T,{size:16,className:c("fill-current",l<=s.difficulty?"text-yellow-500":"text-gray-300")},l))})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k(s.timer)||"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsx("button",{className:"rounded-full p-1 text-gray-400 hover:bg-red-50 hover:text-red-500","aria-label":`Удалить тренировку ${s.name}`,onClick:()=>b(s.id),children:e.jsx(M,{size:18})})})]},a)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-6 text-center text-sm text-gray-500",children:"Нет данных для отображения"})})})]})}):e.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:d.length>0?d.map(s=>e.jsxs("div",{className:"flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm transition-all hover:shadow-md",children:[e.jsx("div",{className:"flex h-40 items-center justify-center bg-gray-50 p-4",children:e.jsx("img",{src:D(`trainType/${s.instrument}.webp`),alt:x[s.instrument],className:"h-full w-full object-contain"})}),e.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:S(new Date(s.date),"dd.MM.yyy")}),e.jsx("button",{className:"text-gray-400 hover:text-red-500","aria-label":`Удалить тренировку ${s.name}`,onClick:()=>b(s.id),children:e.jsx(M,{size:16})})]}),e.jsx(p,{to:`/train/${s.id}`,className:"mt-2 block",children:e.jsx("h3",{className:"text-lg font-medium text-yellow-600 hover:underline",children:s.name})}),e.jsx("p",{className:"line-clamp-3 text-sm text-gray-600",children:s.description}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1 pb-2",children:s.type.map(a=>a&&e.jsx("span",{className:"rounded-full bg-stone-100 px-2 py-1 text-xs font-medium text-gray-700",children:u[a]},a))}),e.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:x[s.instrument]}),e.jsx("div",{className:"flex",children:[1,2,3,4,5].map(a=>e.jsx(T,{size:16,className:c("fill-current",a<=s.difficulty?"text-yellow-500":"text-gray-300")},a))})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Время тренировки: ",k(s.timer)||"-"]})]})]},s.id)):e.jsx("div",{className:"col-span-full rounded-lg border-2 border-dashed border-gray-300 py-12 text-center",children:e.jsx("p",{className:"text-gray-500",children:"Нет данных для отображения"})})})]})})};export{W as default};
